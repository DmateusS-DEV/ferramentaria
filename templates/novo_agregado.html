{% extends "base.html" %}
{% block title %}Novo Agregado{% endblock %}
{% block body_class %}page--dashboard{% endblock %}

{% block content %}
<section class="edit-shell">
  <header class="edit-header">
    <h1 class="page-title" style="text-align:center;">NOVO AGREGADO</h1>
    <div class="page-subtitle" style="text-align:center;">Cadastre um item no estoque.</div>
  </header>

  <form class="edit-form center-narrow" method="post" action="{{ url_for('novo_agregado') }}">
    <div class="form-grid">
      <div class="form-field">
        <label for="tag">Tag</label>
        <input id="tag" name="tag" class="input" required>
      </div>

      <div class="form-field">
        <label for="nome">Nome</label>
        <input id="nome" name="nome" class="input" required>
      </div>

      <div class="form-field">
        <label for="aplicacao">Aplicação</label>
        <input id="aplicacao" name="aplicacao" class="input">
      </div>

      <div class="form-field">
        <label for="localizacao">Localização</label>
        <input id="localizacao" name="localizacao" class="input">
      </div>

      <div class="form-field">
        <label for="status">Status</label>
        <select id="status" name="status" class="input">
          <option value="Disponível" selected>Disponível</option>
          <option value="Aplicado">Aplicado</option>
          <option value="Em reforma">Em reforma</option>
          <option value="Descartado">Descartado</option>
        </select>
      </div>

      <div class="form-field">
        <label for="aplicado_em">Aplicado em (se estiver em uso)</label>
        <input id="aplicado_em" name="aplicado_em" class="input">
      </div>
    </div>

    <div class="form-actions">
      <a class="btn btn--outline" href="{{ url_for('listar_agregados_tipos') }}">← Voltar</a>
      <button class="btn btn--primary" type="submit">Salvar</button>
    </div>
  </form>
</section>
{% endblock %}

{% block extra_js %}
<script>
  const st = document.getElementById('status');
  const ap = document.getElementById('aplicado_em');
  function toggleAplicado(){ ap.disabled = (st.value !== 'Aplicado'); }
  toggleAplicado();
  st.addEventListener('change', toggleAplicado);
</script>
{% endblock %}